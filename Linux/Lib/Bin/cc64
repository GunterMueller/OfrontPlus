#!/bin/bash
cd ../Obj64
export CC="gcc -I. -I../../../Lib/Mod -m64 -Os -g0 -fvisibility=hidden -finline-small-functions -fno-exceptions -fno-unwind-tables -fno-asynchronous-unwind-tables -ffunction-sections -c"
export AR="ar -rc ../libOfront64.a"
if [ -f "../libOfront64.a" ]; then rm "../libOfront64.a"; fi

## Ofront+

$CC ../../../Lib/Mod/SYSTEM.c Heap.c Types.c Platform.c Console.c Kernel.c Args.c Strings.c Files.c Reals.c Modules.c Texts.c Oberon.c
if [ $? != 0 ]; then exit 1; fi
$AR SYSTEM.o Heap.o Types.o Platform.o Console.o Kernel.o Args.o Strings.o Files.o Reals.o Modules.o Texts.o Oberon.o

## OOC2

$CC ooc2Ascii.c ooc2ConvTypes.c ooc2RandomNumbers.c ooc2Strings.c
if [ $? != 0 ]; then exit 1; fi
$AR ooc2Ascii.o ooc2ConvTypes.o ooc2RandomNumbers.o ooc2Strings.o

## POW

$CC powStrings.c
if [ $? != 0 ]; then exit 1; fi
$AR powStrings.o

## Free Oberon

$CC SDL2.c SDL2mixer.c Out.c Graph.c Math.c Sound.c Turtle.c -w
if [ $? != 0 ]; then exit 1; fi
$AR SDL2.o SDL2mixer.o Out.o Graph.o Math.o Sound.o Turtle.o

## libCurl

#$CC libCurl.c NetHttp.c
#if [ $? != 0 ]; then exit 1; fi
#$AR libCurl.o NetHttp.o
